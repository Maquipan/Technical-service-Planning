<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="logo2.png" type="image/png">
    <title>Maquipan | Workspace</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Outfit:wght@500;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. VARIABLES --- */
        :root {
            --bg-dark: #030712;
            --accent-primary: linear-gradient(135deg, #06b6d4 0%, #3b82f6 100%);
            --accent-secondary: linear-gradient(135deg, #8b5cf6 0%, #d946ef 100%);
            --accent-warn: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);
            --text-white: #f9fafb;
            --text-gray: #9ca3af;
            --glass-border: 1px solid rgba(255, 255, 255, 0.08);
            --glow: 0 0 20px rgba(59, 130, 246, 0.15);
        }

        /* --- 2. BASE --- */
        * { box-sizing: border-box; outline: none; }
        
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-white);
            height: 100vh;
            overflow: hidden; 
            display: flex;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(56, 189, 248, 0.08), transparent 25%), 
                radial-gradient(circle at 85% 30%, rgba(139, 92, 246, 0.08), transparent 25%);
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }

        /* --- 3. LAYOUT --- */
        .wrapper {
            display: grid;
            grid-template-columns: 280px 1fr;
            width: 100%;
            height: 100vh;
        }

        /* --- 4. SIDEBAR --- */
        .sidebar {
            background: rgba(10, 10, 15, 0.8); /* M√°s opaco para estabilidad */
            border-right: var(--glass-border);
            padding: 2rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            z-index: 20;
            overflow-y: auto;
        }

        .logo-area {
            display: flex; align-items: center; gap: 1rem;
            padding-bottom: 1.5rem; border-bottom: var(--glass-border);
            margin-bottom: 0.5rem;
        }
        .logo-img { height: 40px; width: auto; filter: drop-shadow(0 0 8px rgba(255,255,255,0.2)); }
        .logo-text { font-family: 'Outfit', sans-serif; font-weight: 700; font-size: 1.2rem; letter-spacing: 1px; color: #fff; }

        .widget {
            background: rgba(255,255,255,0.03);
            border-radius: 16px;
            padding: 1.2rem;
            border: var(--glass-border);
            transition: transform 0.2s ease; /* Animaci√≥n simple */
        }
        .widget:hover { background: rgba(255,255,255,0.05); transform: translateY(-2px); }
        .widget h3 { margin: 0 0 0.8rem 0; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1.5px; color: var(--text-gray); font-weight: 700; }

        .weather-box { display: flex; align-items: center; justify-content: space-between; }
        .temp { font-family: 'Outfit', sans-serif; font-size: 2.2rem; font-weight: 700; background: var(--accent-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .weather-desc { font-size: 0.85rem; color: var(--text-gray); text-transform: capitalize; margin-top: 0.2rem; }

        .eco-item { display: flex; justify-content: space-between; margin-bottom: 0.8rem; font-size: 0.9rem; }
        .eco-item:last-child { margin-bottom: 0; }
        .eco-val { font-weight: 600; color: #fff; }

        #quick-notes {
            width: 100%; height: 100px;
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.05);
            color: #e2e8f0;
            resize: none;
            border-radius: 8px;
            padding: 0.8rem;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        #quick-notes:focus { background: rgba(0,0,0,0.4); border-color: rgba(255,255,255,0.2); }

        /* --- 5. MAIN CONTENT --- */
        .main-panel {
            padding: 2rem 3rem;
            overflow-y: auto;
            position: relative;
            z-index: 5;
            /* Fix renderizado */
            transform: translateZ(0);
        }

        .header {
            display: flex; justify-content: space-between; align-items: flex-end;
            margin-bottom: 3rem;
        }
        .welcome-text h1 { font-family: 'Outfit', sans-serif; font-size: 2.5rem; margin: 0; background: linear-gradient(to right, #fff, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .welcome-text p { margin: 0.5rem 0 0 0; color: var(--text-gray); font-size: 1rem; }
        
        .search-box { position: relative; width: 350px; }
        .search-input {
            width: 100%;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            padding: 1rem 1rem 1rem 3rem;
            border-radius: 50px;
            color: #fff; font-size: 1rem; transition: 0.3s;
        }
        .search-input:focus { background: rgba(0,0,0,0.3); border-color: #3b82f6; }
        .search-icon { position: absolute; left: 1.2rem; top: 50%; transform: translateY(-50%); color: var(--text-gray); width: 18px; }

        /* --- 6. GRID ESTABLE --- */
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            padding-bottom: 2rem;
            /* Estabilidad */
            transform: translate3d(0,0,0);
        }

        .card {
            background: rgba(30, 41, 59, 0.6); /* M√°s s√≥lido */
            border: var(--glass-border);
            border-radius: 24px;
            padding: 1.8rem;
            text-decoration: none;
            color: #fff;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 220px;
            
            /* --- FIXES DE ESTABILIDAD --- */
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s; /* Transiciones r√°pidas */
            cursor: pointer !important;
            user-select: none;
            -webkit-user-drag: none;
            transform: translateZ(0); /* Fuerza GPU */
            will-change: transform; /* Avisa al navegador */
            backface-visibility: hidden; /* Evita parpadeo trasero */
        }
        
        /* Eliminamos animaciones complejas de entrada que causan el "desaparecer" */

        .card > * { pointer-events: none; } /* Clic transparente */

        .card:hover {
            background: rgba(30, 41, 59, 0.9);
            transform: translateY(-5px); /* Movimiento m√°s corto y seguro */
            border-color: rgba(255,255,255,0.3);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
            z-index: 10;
        }

        .card-icon-bg {
            width: 56px; height: 56px;
            border-radius: 16px;
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 1.5rem;
            background: rgba(255,255,255,0.05);
            transition: 0.3s;
        }
        
        /* Colores */
        .card[data-type="ops"] .card-icon-bg { background: rgba(6, 182, 212, 0.15); color: #22d3ee; }
        .card[data-type="ops"]:hover .card-icon-bg { background: var(--accent-primary); color: #fff; }

        .card[data-type="biz"] .card-icon-bg { background: rgba(139, 92, 246, 0.15); color: #c084fc; }
        .card[data-type="biz"]:hover .card-icon-bg { background: var(--accent-secondary); color: #fff; }

        .card[data-type="secure"] .card-icon-bg { background: rgba(245, 158, 11, 0.15); color: #fbbf24; }
        .card[data-type="secure"]:hover .card-icon-bg { background: var(--accent-warn); color: #fff; }

        .card svg { width: 28px; height: 28px; stroke-width: 2; }
        .card-info h2 { font-family: 'Outfit', sans-serif; font-size: 1.3rem; margin: 0 0 0.5rem 0; font-weight: 700; }
        .card-info p { font-size: 0.85rem; color: var(--text-gray); margin: 0; line-height: 1.4; }

        .action-arrow {
            position: absolute; bottom: 1.5rem; right: 1.5rem;
            width: 32px; height: 32px;
            background: #fff; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: #000;
            opacity: 0.3; /* Siempre visible pero tenue */
            transform: scale(1);
            transition: 0.2s;
        }
        .card:hover .action-arrow { opacity: 1; background: #fff; color: #000; }

        /* --- 7. FOOTER --- */
        .bottom-section {
            margin-top: 2rem;
            display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem;
        }
        .glass-panel {
            background: rgba(20, 20, 30, 0.6); border: var(--glass-border); border-radius: 20px; padding: 1.5rem;
        }
        .news-list { list-style: none; padding: 0; margin: 0; }
        .news-list li { padding: 0.8rem 0; border-bottom: 1px solid rgba(255,255,255,0.05); display: flex; align-items: center; gap: 0.5rem; }
        .news-list li:before { content: "‚Ä¢"; color: #3b82f6; font-size: 1.5rem; line-height: 0; }
        .news-list a { color: var(--text-white); text-decoration: none; font-size: 0.95rem; transition: 0.2s; }
        .news-list a:hover { color: #60a5fa; padding-left: 5px; }

        /* --- 8. MODAL --- */
        .modal-overlay {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.9); /* M√°s oscuro */
            z-index: 9999;
            display: none; justify-content: center; align-items: center;
        }
        
        .modal-box {
            background: #0f172a; border: 1px solid rgba(255,255,255,0.1);
            padding: 3rem; border-radius: 30px;
            text-align: center; width: 400px;
        }
        
        .modal-icon {
            width: 70px; height: 70px; background: rgba(239, 68, 68, 0.1); color: #ef4444;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            margin: 0 auto 1.5rem auto;
        }
        .pin-input {
            background: transparent; border: none; border-bottom: 2px solid rgba(255,255,255,0.2);
            color: #fff; font-size: 2rem; letter-spacing: 1rem; width: 200px; text-align: center;
            margin: 2rem 0; padding-bottom: 0.5rem;
        }
        .pin-input:focus { border-color: #ef4444; }

        @media (max-width: 900px) {
            .wrapper { grid-template-columns: 1fr; }
            .sidebar { display: none; } 
            .main-panel { padding: 1.5rem; }
            .header { flex-direction: column; align-items: flex-start; gap: 1.5rem; }
            .search-box { width: 100%; }
            .bottom-section { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="wrapper">
        <aside class="sidebar">
            <div class="logo-area">
                <img src="logo2.png" alt="Logo" class="logo-img">
                <span class="logo-text">MAQUIPAN</span>
            </div>
            <div class="widget">
                <h3>Clima en Villa Alemana</h3>
                <div class="weather-box">
                    <div>
                        <div class="temp" id="weather-temp">--¬∞</div>
                        <div class="weather-desc" id="weather-desc">Cargando...</div>
                    </div>
                    <img id="weather-icon" src="" alt="icon" width="50">
                </div>
            </div>
            <div class="widget">
                <h3>Indicadores Hoy</h3>
                <div id="indicators-container">
                    <div class="eco-item"><span>Cargando datos...</span></div>
                </div>
            </div>
            <div class="widget">
                <h3>Bloc de Notas</h3>
                <textarea id="quick-notes" placeholder="Escribe aqu√≠ notas r√°pidas..."></textarea>
            </div>
            <div class="widget" style="padding: 0; overflow: hidden;">
                <iframe style="border-radius: 12px" src="https://open.spotify.com/embed/playlist/37i9dQZF1DWWQRwui0ExPn?utm_source=generator&theme=0" width="100%" height="80" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
            </div>
            <div class="widget" style="margin-top:auto; background: transparent; border: none; padding:0;">
                <p id="daily-fact" style="font-size:0.8rem; color: #64748b; font-style: italic;"></p>
            </div>
        </aside>

        <main class="main-panel">
            <header class="header">
                <div class="welcome-text">
                    <h1 id="greeting">Hola, Equipo</h1>
                    <p id="date-display">Cargando fecha...</p>
                </div>
                <div class="search-box">
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                    <input type="text" id="search-input" class="search-input" placeholder="Buscar herramienta...">
                </div>
            </header>

            <div class="grid-container" id="apps-grid">
                
                <a href="#" id="link-planificacion" class="card" data-type="secure" data-tags="planificacion">
                    <div class="card-icon-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" /></svg>
                    </div>
                    <div class="card-info">
                        <h2>Planificaci√≥n</h2>
                        <p>Gesti√≥n de rutas y servicios t√©cnicos. Requiere clave.</p>
                    </div>
                    <div class="action-arrow"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg></div>
                </a>

                <a href="https://maquipan.github.io/PIMENTRANSPORTES/" target="_blank" class="card" data-type="ops" data-tags="transporte">
                    <div class="card-icon-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12" /></svg>
                    </div>
                    <div class="card-info">
                        <h2>Transportes</h2>
                        <p>Log√≠stica, despachos y control de flota.</p>
                    </div>
                     <div class="action-arrow"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg></div>
                </a>

                <a href="https://ayudamaquipan.github.io/bodega/" target="_blank" class="card" data-type="ops" data-tags="bodega">
                    <div class="card-icon-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>
                    </div>
                    <div class="card-info">
                        <h2>Bodega</h2>
                        <p>Control de inventario y almacenamiento.</p>
                    </div>
                     <div class="action-arrow"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg></div>
                </a>

                <a href="https://maquipan.github.io/ejecutivos/" target="_blank" class="card" data-type="biz" data-tags="ventas">
                    <div class="card-icon-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
                    </div>
                    <div class="card-info">
                        <h2>Ejecutivos</h2>
                        <p>Gesti√≥n comercial y equipo de ventas.</p>
                    </div>
                     <div class="action-arrow"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg></div>
                </a>

                 <a href="https://maquipan.github.io/negocioservicio/index.html" target="_blank" class="card" data-type="biz" data-tags="negocio">
                    <div class="card-icon-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 21v-7.5a.75.75 0 01.75-.75h3a.75.75 0 01.75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349m-16.5 11.65V9.35m0 0a3.001 3.001 0 003.75-.615A2.993 2.993 0 009.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 002.25 1.016c.896 0 1.7-.393 2.25-1.016a3.001 3.001 0 003.75.614m-16.5 0a3.004 3.004 0 01-.621-4.72L4.318 3.44A1.5 1.5 0 015.378 3h13.243a1.5 1.5 0 011.06.44l1.19 1.189a3 3 0 01-.621 4.72m-13.5 8.65h3.75a.75.75 0 00.75-.75V13.5a.75.75 0 00-.75-.75H6.75a.75.75 0 00-.75.75v3.75c0 .415.336.75.75.75z" /></svg>
                    </div>
                    <div class="card-info">
                        <h2>Negocio Servicio</h2>
                        <p>Plataforma integral de negocios.</p>
                    </div>
                     <div class="action-arrow"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg></div>
                </a>

                <a href="https://maquipan.github.io/visor-de-servicio/" target="_blank" class="card" data-type="ops" data-tags="visor">
                    <div class="card-icon-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                    </div>
                    <div class="card-info">
                        <h2>Visor Servicio</h2>
                        <p>Consulta r√°pida de estado de tickets.</p>
                    </div>
                     <div class="action-arrow"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg></div>
                </a>

                <a href="https://maquipan.github.io/Calendario-2.0/" target="_blank" class="card" data-type="biz" data-tags="calendario">
                    <div class="card-icon-bg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" /></svg>
                    </div>
                    <div class="card-info">
                        <h2>Calendario 2.0</h2>
                        <p>Agenda corporativa y eventos.</p>
                    </div>
                     <div class="action-arrow"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="16"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" /></svg></div>
                </a>

            </div>

            <div class="bottom-section">
                <div class="glass-panel">
                    <h3 style="margin-top:0; color:#3b82f6; display:flex; align-items:center; gap:0.5rem;">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" /></svg>
                        Noticias
                    </h3>
                    <ul class="news-list" id="news-list">
                        <li>Cargando noticias...</li>
                    </ul>
                </div>
                
                 <div class="glass-panel" style="display:flex; flex-direction:column; justify-content:center; text-align:center;">
                    <span style="font-size:2rem;">üòÑ</span>
                    <p id="daily-joke" style="font-style:italic; color:var(--text-gray); margin-top:0.5rem;">Cargando risas...</p>
                </div>
            </div>

        </main>
    </div>

    <div class="modal-overlay" id="modal-pass">
        <div class="modal-box">
            <div class="modal-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="30"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" /></svg>
            </div>
            <h2 style="color:#fff; margin:0;">Acceso Restringido</h2>
            <p style="color:var(--text-gray);">Ingresa PIN para Planificaci√≥n</p>
            <input type="password" id="pin-input" class="pin-input" maxlength="20" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <div style="display:flex; gap:1rem; justify-content:center;">
                <button id="btn-cancel" style="background:transparent; border:1px solid #334155; color:#94a3b8; padding:0.8rem 1.5rem; border-radius:10px; cursor:pointer;">Cancelar</button>
                <button id="btn-confirm" style="background:var(--accent-warn); border:none; color:#fff; padding:0.8rem 1.5rem; border-radius:10px; cursor:pointer; font-weight:700;">Entrar</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // 1. TIEMPO
            const setGreeting = () => {
                const now = new Date();
                const h = now.getHours();
                const text = h < 12 ? 'Buenos D√≠as' : h < 20 ? 'Buenas Tardes' : 'Buenas Noches';
                document.getElementById('greeting').innerText = `${text}, Maquipan`;
                
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                const dateStr = now.toLocaleDateString('es-CL', options);
                document.getElementById('date-display').innerText = dateStr.charAt(0).toUpperCase() + dateStr.slice(1);
            };
            setGreeting();

            // 2. CLIMA
            fetch('https://api.openweathermap.org/data/2.5/weather?id=3868621&appid=047bc4a894d2f2cfbaf93df3c32ecd55&units=metric&lang=es')
                .then(r => r.json())
                .then(d => {
                    document.getElementById('weather-temp').innerText = Math.round(d.main.temp) + '¬∞';
                    document.getElementById('weather-desc').innerText = d.weather[0].description;
                    document.getElementById('weather-icon').src = `https://openweathermap.org/img/wn/${d.weather[0].icon}@2x.png`;
                })
                .catch(() => document.getElementById('weather-desc').innerText = "Sin conexi√≥n");

            // 3. INDICADORES
            fetch('https://mindicador.cl/api')
                .then(r => r.json())
                .then(d => {
                    const list = [{k:'uf', l:'UF'}, {k:'dolar', l:'USD'}, {k:'euro', l:'EUR'}];
                    const html = list.map(x => `
                        <div class="eco-item">
                            <span style="color:#94a3b8">${x.l}</span>
                            <span class="eco-val">$${d[x.k].valor.toLocaleString('es-CL')}</span>
                        </div>`).join('');
                    document.getElementById('indicators-container').innerHTML = html;
                });

            // 4. NOTAS
            const notePad = document.getElementById('quick-notes');
            notePad.value = localStorage.getItem('maquipan_notes') || '';
            notePad.addEventListener('input', (e) => {
                localStorage.setItem('maquipan_notes', e.target.value);
            });

            // 5. BUSCADOR
            document.getElementById('search-input').addEventListener('keyup', (e) => {
                const term = e.target.value.toLowerCase();
                document.querySelectorAll('.card').forEach(card => {
                    const text = card.innerText.toLowerCase() + card.dataset.tags;
                    card.style.display = text.includes(term) ? 'flex' : 'none';
                });
            });

            // 6. MODAL
            const modal = document.getElementById('modal-pass');
            const pinInput = document.getElementById('pin-input');
            
            document.getElementById('link-planificacion').addEventListener('click', (e) => {
                e.preventDefault();
                modal.style.display = 'flex';
                pinInput.focus();
            });

            const closeModal = () => {
                modal.style.display = 'none';
                pinInput.value = '';
            };

            const checkPass = () => {
                if(pinInput.value === atob("QW1vYVBpbWVudGVs")) {
                    window.open("https://maquipan.github.io/Planificacion/", "_blank");
                    closeModal();
                } else {
                    pinInput.style.borderColor = '#ef4444';
                    setTimeout(() => pinInput.style.borderColor = 'rgba(255,255,255,0.2)', 500);
                }
            };

            document.getElementById('btn-cancel').addEventListener('click', closeModal);
            document.getElementById('btn-confirm').addEventListener('click', checkPass);
            pinInput.addEventListener('keyup', (e) => e.key === 'Enter' && checkPass());
            
            // 7. EXTRAS
            const facts = ["La excelencia no es un acto, es un h√°bito.", "Log√≠stica es el arte de hacer f√°cil lo dif√≠cil.", "Tu actitud determina tu altitud."];
            document.getElementById('daily-fact').innerText = `"${facts[Math.floor(Math.random()*facts.length)]}"`;

            const jokes = ["¬øQu√© hace una abeja en el gym? ¬°Zum-ba!", "¬øQu√© le dice un techo a otro? Techo de menos."];
            document.getElementById('daily-joke').innerText = jokes[Math.floor(Math.random()*jokes.length)];

            fetch('https://newsdata.io/api/1/news?apikey=pub_f5ba5ea7a82144ba9f55ff8781390a55&country=cl&language=es&category=top')
                .then(r=>r.json())
                .then(d => {
                    if(d.results) {
                        document.getElementById('news-list').innerHTML = d.results.slice(0,3).map(n => 
                            `<li><a href="${n.link}" target="_blank">${n.title}</a></li>`
                        ).join('');
                    }
                });
        });
    </script>
</body>
</html>
